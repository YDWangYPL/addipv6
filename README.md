 # IPv6  ADD 管理工具

欢迎使用 IPv6 管理工具，这是一个用于管理 VPS 上 IPv6 地址的 Shell 脚本。该工具提供了以下功能：

- **添加随机 IPv6 地址**  
  根据选定网卡的 /64 前缀，批量生成随机 IPv6 地址并添加到接口上，同时记录添加的地址以便后续管理。

- **管理默认出口 IPv6 地址**  
  列出选定网卡上所有全局 IPv6 地址，供用户选择一个作为默认出口地址，并更新默认路由（出站流量将使用该地址作为源地址）。更新后可选择将配置写入 `/etc/rc.local`，以确保重启后依然生效。

- **一键删除全部添加的 IPv6 地址**  
  删除通过该工具添加的所有随机 IPv6 地址（使用临时记录文件 `/tmp/added_v6_ipv6.txt`）。

- **只保留当前默认出口 IPv6 地址**  
  删除除当前默认出口 IPv6 地址之外的所有 IPv6 地址，并可选择将配置写入 `/etc/rc.local` 以持久化配置。

## 作者信息

- **作者**：Joey
- **博客**：[joeyblog.net](https://joeyblog.net)
- **Telegram 群**：[加入 TG 群](https://t.me/+ft-zI76oovgwNmRh)

## 功能菜单

运行脚本后会显示以下功能选项，供用户选择：

1. **添加随机 IPv6 地址**  
   根据检测到的网卡和 /64 前缀，自动生成并添加指定数量的随机 IPv6 地址。

2. **管理默认出口 IPv6 地址**  
   列出当前接口上所有全局 IPv6 地址，供用户选择一个作为出口地址，然后更新默认路由配置。更新后可选择写入 `/etc/rc.local` 来保证配置在重启后生效。

3. **一键删除全部添加的 IPv6 地址**  
   删除所有通过该工具添加的 IPv6 地址（记录在 `/tmp/added_v6_ipv6.txt` 文件中）。

4. **只保留当前默认出口 IPv6 地址**  
   删除除当前默认出口 IPv6 地址之外的所有 IPv6 地址，并可选择将配置写入 `/etc/rc.local`。

## 环境要求

- Linux 系统（Debian/Ubuntu/CentOS 等）
- Bash shell
- `ip` 命令工具（iproute2）
- Root 权限（必须以 root 用户或使用 `sudo` 运行）

## 安装与使用

1. **下载脚本**

   将脚本 `merged_ipv6.sh` 下载到你的 VPS 上。

2. **赋予执行权限**

   ```bash
   chmod +x merged_ipv6.sh
   ```

3. **以 Root 权限运行**

   ```bash
   sudo ./merged_ipv6.sh
   ```

4. **按提示操作**

   根据屏幕显示的菜单，输入相应的选项数字，按照提示进行网卡选择、地址生成、配置更新或删除操作。

## 配置持久化

在更新默认出口 IPv6 地址后，脚本会询问是否将该配置写入 `/etc/rc.local`（或其他启动脚本），以避免重启后失效。如果选择写入，配置命令会追加到 `/etc/rc.local` 文件中（确保该文件具有执行权限）。

## 注意事项

- 本脚本会修改网络配置，建议在测试环境中验证后再在生产环境使用。
- 更新默认路由可能会影响现有网络连接，操作前请确保有其他远程管理手段。
- 删除操作将移除所有或除默认出口外的 IPv6 地址，请谨慎使用。

## 许可证

该项目采用 MIT 许可证。请参阅 LICENSE 文件了解详细信息。

---

希望此工具能帮助你高效管理 VPS 上的 IPv6 地址。如有疑问或建议，欢迎在 [TG 群](https://t.me/+ft-zI76oovgwNmRh) 中交流。
